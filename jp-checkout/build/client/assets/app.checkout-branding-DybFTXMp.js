import{w as d,b as u,u as a,c as p,d as x,r as o}from"./chunk-WWGJGFF6-Du9VGVJJ.js";import{j as e}from"./jsx-runtime-DCmaUFpU.js";import{u as g}from"./useAppBridge-Bj34gXAL.js";const b=d(function(){const s=u(),t=a(),c=p(),l=x(),i=(c==null?void 0:c.state)==="submitting",h=o.useRef(!1);let r=null;try{r=g()}catch(n){console.warn("AppBridge not available (this is OK in some contexts):",n.message)}return o.useEffect(()=>{!h.current&&!s&&!i&&(t!=null&&t.checkoutProfileId)&&l&&(h.current=!0,setTimeout(()=>{try{const n=new FormData;l(n,{method:"post"})}catch(n){console.error("Error submitting form:",n)}},500))},[s,i,t,l]),o.useEffect(()=>{r&&(s!=null&&s.success?r.toast.show(s.message||"Checkout branding applied successfully!"):s!=null&&s.error&&r.toast.show(`Error: ${s.error}`,{isError:!0}))},[s,r]),o.useEffect(()=>{s&&console.log("Checkout Branding Action Data:",s)},[s]),e.jsxs("s-page",{title:"Checkout Branding",children:[e.jsxs("s-section",{heading:"Checkout Branding",children:[!s&&!i&&e.jsx("s-banner",{tone:"info",heading:"Auto-applying",children:e.jsx("s-text",{children:"Checkout branding will be applied automatically..."})}),e.jsx("s-form",{method:"post",children:e.jsx("s-button",{type:"submit",loading:i,disabled:i,children:i?"Applying...":"Re-apply Checkout CSS"})}),i&&e.jsx("s-banner",{tone:"info",heading:"Processing",children:e.jsx("s-text",{children:"Applying checkout branding... Please wait."})}),(s==null?void 0:s.success)&&e.jsx("s-banner",{tone:"success",heading:"Success",children:e.jsxs("s-stack",{gap:"base",children:[e.jsx("s-text",{children:s.message}),s.scriptUrl&&e.jsxs("s-text",{size:"small",children:["Script URL: ",e.jsx("s-link",{href:s.scriptUrl,target:"_blank",children:s.scriptUrl})]})]})}),(s==null?void 0:s.error)&&e.jsxs("s-banner",{tone:"critical",heading:"Error",children:[e.jsx("s-text",{children:s.error}),s.details&&e.jsxs("s-details",{children:[e.jsx("s-summary",{children:"View details"}),e.jsx("pre",{style:{fontSize:"12px",overflow:"auto"},children:JSON.stringify(s.details,null,2)})]})]}),(t==null?void 0:t.checkoutProfileId)&&e.jsx("s-banner",{tone:"info",heading:"Info",children:e.jsxs("s-text",{children:["Checkout Profile ID: ",t.checkoutProfileId]})})]}),e.jsx("s-section",{heading:"Instructions",children:e.jsxs("s-stack",{gap:"base",children:[e.jsx("s-text",{children:"This will apply custom CSS to your checkout to:"}),e.jsxs("s-unordered-list",{children:[e.jsx("s-list-item",{children:"Add hidden inputs for pickup dates (Platter Pickup Date and Other Items Pickup Date) before store selection"}),e.jsx("s-list-item",{children:"Preserve cart attributes in checkout"}),e.jsx("s-list-item",{children:'Hide "FREE" text on the right side of pickup locations'}),e.jsx("s-list-item",{children:'Hide "Usually ready in X hours" text on the right side'})]}),e.jsxs("s-text",{size:"small",style:{marginTop:"1rem"},children:[e.jsx("strong",{children:"Note:"}),' To change "PICK UP/BOOK YOUR OWN RIDER" text, go to ',e.jsx("strong",{children:"Settings → Checkout → Local pickup"})," in your Shopify admin."]}),e.jsx("s-text",{size:"small",children:e.jsx("strong",{children:"Important Notes:"})}),e.jsxs("s-unordered-list",{children:[e.jsx("s-list-item",{children:"Make sure your checkout UI extension is deployed and active in your checkout settings"}),e.jsx("s-list-item",{children:"Go to Settings → Checkout → Checkout extensions to enable the extension"}),e.jsx("s-list-item",{children:"The CSS will be applied immediately, but script injection requires the extension to be active"}),e.jsx("s-list-item",{children:"Check the browser console on your checkout page for any errors"})]}),(s==null?void 0:s.success)&&s.cssApplied&&e.jsx("s-banner",{tone:"info",heading:"CSS Applied",children:e.jsx("s-text",{children:"The CSS has been successfully applied to your checkout. Check your checkout page to see the changes."})})]})})]})});export{b as default};
